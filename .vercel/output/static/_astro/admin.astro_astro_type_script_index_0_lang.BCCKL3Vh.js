import{o as l,d as i,a as c,g as u,s as d,b as s}from"./client.ocY2oErL.js";const y=document.getElementById("auth-loading-message"),t=document.getElementById("admin-login-container"),a=document.getElementById("admin-dashboard-container"),g=document.getElementById("logout-button");l(s,async e=>{if(y.style.display="none",e)try{const o=i(c,"users",e.uid),n=await u(o);if(n.exists()){const r=n.data();if(r.role==="admin")a.style.display="block",t.style.display="none";else if(r.role==="supervisor")window.location.href="/dashboard";else throw new Error("Invalid user role.")}else throw new Error("User data not found in database.")}catch(o){console.error("Auth CheckError:",o.message),await d(s),a.style.display="none",t.style.display="block"}else a.style.display="none",t.style.display="block"});g.addEventListener("click",async()=>{try{await d(s)}catch(e){console.error("Logout Error:",e),alert("فشل تسجيل الخروج. يرجى المحاولة مرة أخرى.")}});
