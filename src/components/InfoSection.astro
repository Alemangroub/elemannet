---
import info from '../data/info.json';
---

<section id="about-us" class="info-section">
    <div class="container">
        <div class="info-content-main">
            <h2 class="section-title">{info.title}</h2>
            <h3 class="section-subtitle">{info.subtitle}</h3>
            {info.manager && <h3 class="section-subtitle">{info.manager}</h3>}
            {info.paragraphs.map(paragraph => (
                <p>{paragraph}</p>
            ))}
        </div>

        {info.cards && info.cards.length > 0 && (
            <div class="cards-grid">
                {info.cards.map((card, index) => (
                    <a href={`/about/${card.slug}`} class="info-card" data-index={index}>
                        {card.image && (
                            <img src={card.image.src} alt={card.image.alt} class="card-image-bg" />
                        )}
                        <div class="card-overlay"></div>
                        <div class="card-content">
                            {card.icon && <div class="card-icon" set:html={card.icon} />}
                            <h4 class="card-title">{card.title}</h4>
                            <p class="card-description">{card.description}</p>
                        </div>
                    </a>
                ))}
            </div>
        )}
    </div>
</section>

<script is:inline>
    document.addEventListener('DOMContentLoaded', () => {
        const infoCards = document.querySelectorAll('#about-us .info-card');
        if (infoCards.length === 0) return;

        const observer = new IntersectionObserver((entries, obs) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const card = entry.target;
                    const index = card.getAttribute('data-index');
                    card.style.transitionDelay = `${index * 150}ms`;
                    card.classList.add('is-visible');
                    obs.unobserve(card);
                }
            });
        }, { threshold: 0.1 });

        infoCards.forEach(card => {
            observer.observe(card);
        });
    });
</script>

<style>
    .info-section {
        padding: 80px 0;
        background-color: #f7fafc;
        direction: rtl;
        overflow-x: hidden;
    }

    .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
    }

    .info-content-main {
        max-width: 800px;
        margin: 0 auto 60px;
        text-align: center;
    }

    .info-content-main .section-title {
        font-family: 'Cairo', sans-serif;
        font-size: 2.8rem;
        font-weight: 700;
        color: #2d3748;
        margin-bottom: 10px;
    }

    .info-content-main .section-subtitle {
        font-family: 'Almarai', sans-serif;
        font-size: 1.5rem;
        font-weight: 400;
        color: #1a5f7a;
        margin-bottom: 30px;
    }

    .info-content-main p {
        font-family: 'Almarai', sans-serif;
        font-size: 1.1rem;
        line-height: 1.8;
        color: #4a5568;
        margin-bottom: 20px;
    }

    .cards-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 35px;
    }

    .info-card {
        position: relative;
        height: 380px;
        display: flex;
        flex-direction: column;
        justify-content: flex-end;
        align-items: center;
        text-align: center;
        color: white;
        text-decoration: none;
        border-radius: 15px;
        overflow: hidden;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05), 0 15px 35px rgba(0, 0, 0, 0.05);
        
        opacity: 0;
        transform: translateY(50px);
        transition: opacity 0.8s ease-out, transform 0.8s ease-out, box-shadow 0.4s ease;
    }

    .info-card.is-visible {
        opacity: 1;
        transform: translateY(0);
    }

    .info-card:hover {
        transform: translateY(-12px) !important;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08), 0 25px 50px rgba(0, 0, 0, 0.08);
        cursor: pointer;
    }

    .card-image-bg {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.4s ease;
    }

    .info-card:hover .card-image-bg {
        transform: scale(1.05);
    }

    .card-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(to top, rgba(10, 15, 20, 0.9) 0%, rgba(0, 0, 0, 0.1) 60%, rgba(0,0,0,0) 80%);
        z-index: 1;
        transition: background 0.4s ease;
    }
    
    .info-card:hover .card-overlay {
        background: linear-gradient(to top, rgba(10, 15, 20, 0.95) 0%, rgba(0, 0, 0, 0.2) 60%, rgba(0,0,0,0) 80%);
    }

    .card-content {
        position: relative;
        z-index: 2;
        padding: 25px;
        width: 100%;
    }

    .card-icon {
        margin: 0 auto 15px;
        width: 40px;
        height: 40px;
        color: rgba(255, 255, 255, 0.9);
    }

    .card-icon :global(svg) {
        width: 100%;
        height: 100%;
    }

    .card-title {
        font-family: 'Cairo', sans-serif;
        font-size: 1.6rem;
        font-weight: 700;
        color: #ffffff;
        margin-bottom: 8px;
        line-height: 1.4;
    }

    .card-description {
        font-family: 'Almarai', sans-serif;
        font-size: 0.95rem;
        line-height: 1.6;
        color: rgba(255, 255, 255, 0.85);
    }
    
    /* Responsive styles */
    @media (max-width: 1024px) {
        .cards-grid {
            grid-template-columns: repeat(2, 1fr);
        }
    }

    @media (max-width: 768px) {
        .info-content-main .section-title {
            font-size: 2.3rem;
        }
        .info-content-main .section-subtitle {
            font-size: 1.3rem;
        }
        .cards-grid {
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        }
        .info-card {
            height: 340px;
        }
        .card-title {
            font-size: 1.5rem;
        }
    }
</style>
