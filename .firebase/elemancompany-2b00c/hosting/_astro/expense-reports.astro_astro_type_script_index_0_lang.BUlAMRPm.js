import{o as E,d as b,a as w,g as k,s as y,b as d}from"./client.ocY2oErL.js";document.addEventListener("DOMContentLoaded",()=>{const f=document.getElementById("auth-loading-message"),i=document.getElementById("admin-login-container"),s=document.getElementById("page-content");E(d,async t=>{if(f&&(f.style.display="none"),t)try{const e=b(w,"users",t.uid),n=await k(e);if(n.exists()&&n.data().role==="admin"){s&&(s.style.display="block"),i&&(i.style.display="none");const o=document.getElementById("logout-button");o&&o.addEventListener("click",async()=>{await y(d),window.location.href="/admin"})}else await y(d),window.location.href="/admin"}catch(e){console.error("Auth Check Error:",e),await y(d),i&&(i.style.display="block"),s&&(s.style.display="none")}else s&&(s.style.display="none"),i&&(i.style.display="block")});const r=document.querySelector(".container");if(!r)return;r.addEventListener("click",t=>{const e=t.target,n=e.closest(".expense-report-card");if(!n)return;const o=n.querySelector(".view-mode"),a=n.querySelector(".edit-mode");if(e.matches(".edit-btn-toggle")&&(o&&(o.style.display="none"),a&&(a.style.display="block")),e.matches(".cancel-btn-toggle")&&(a&&(a.style.display="none"),o&&(o.style.display="block")),e.matches(".delete-btn")){const c=e.dataset.deleteUrl;c&&p(c)}}),r.addEventListener("input",t=>{const e=t.target;if(e.matches(".expense-input")){const n=e.closest(".edit-mode");if(!n)return;let o=0;n.querySelectorAll(".expense-input").forEach(c=>{const h=c.value;o+=parseFloat(h)||0});const a=n.querySelector(".total-display");a&&(a.textContent=`${o.toLocaleString("ar-EG")} Ø¬.Ù…`)}});const l=document.getElementById("delete-modal"),u=document.getElementById("cancel-delete-btn"),m=document.getElementById("confirm-delete-btn");function p(t){m&&(m.href=t),l&&(l.style.display="flex")}function g(){l&&(l.style.display="none")}u&&u.addEventListener("click",g),l&&l.addEventListener("click",t=>{t.target===l&&g()})});
